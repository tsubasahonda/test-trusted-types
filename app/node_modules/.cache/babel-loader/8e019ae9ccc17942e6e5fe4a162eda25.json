{"ast":null,"code":"/**\n * @license\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n */\n// TODO check attributes in safari, remove legacy safe handlers\nconst unsafeAttributeEventHandlers = ['onabort', 'onactivate', 'onactivateinvisible', 'onafterprint', 'onafterupdate', 'onanimationcancel', 'onanimationend', 'onanimationiteration', 'onanimationstart', 'onariarequest', 'onauxclick', 'onbeforeactivate', 'onbeforecopy', 'onbeforecut', 'onbeforedeactivate', 'onbeforeeditfocus', 'onbeforepaste', 'onbeforeprint', 'onbeforeunload', 'onbegin', 'onblur', 'onbounce', 'oncancel', 'oncanplay', 'oncanplaythrough', 'oncellchange', 'onchange', 'onclick', 'onclose', 'oncommand', 'oncontextmenu', 'oncontrolselect', 'oncopy', 'oncuechange', 'oncut', 'ondataavailable', 'ondatasetchanged', 'ondatasetcomplete', 'ondblclick', 'ondeactivate', 'ondrag', 'ondragdrop', 'ondragend', 'ondragenter', 'ondragexit', 'ondragleave', 'ondragover', 'ondragstart', 'ondrop', 'ondurationchange', 'onemptied', 'onend', 'onended', 'onerror', 'onerrorupdate', 'onexit', 'onfilterchange', 'onfinish', 'onfocus', 'onfocusin', 'onfocusout', 'onformdata', 'onfullscreenchange', 'onfullscreenerror', 'ongotpointercapture', 'onhelp', 'oninput', 'oninvalid', 'onkeydown', 'onkeypress', 'onkeyup', 'onlayoutcomplete', 'onload', 'onloadeddata', 'onloadedmetadata', 'onloadend', 'onloadstart', 'onlosecapture', 'onlostpointercapture', 'onmediacomplete', 'onmediaerror', 'onmessage', 'onmousedown', 'onmouseenter', 'onmouseleave', 'onmousemove', 'onmouseout', 'onmouseover', 'onmouseup', 'onmousewheel', 'onmove', 'onmoveend', 'onmovestart', 'onmozfullscreenchange', 'onmozfullscreenerror', 'onmscontentzoom', 'onmsgesturechange', 'onmsgesturedoubletap', 'onmsgestureend', 'onmsgesturehold', 'onmsgesturestart', 'onmsgesturetap', 'onmsgotpointercapture', 'onmsinertiastart', 'onmslostpointercapture', 'onmsmanipulationstatechanged', 'onmspointercancel', 'onmspointerdown', 'onmspointerenter', 'onmspointerleave', 'onmspointermove', 'onmspointerout', 'onmspointerover', 'onmspointerup', 'onoffline', 'ononline', 'onoutofsync', 'onoverscroll', 'onpaste', 'onpause', 'onplay', 'onplaying', 'onpointercancel', 'onpointerdown', 'onpointerenter', 'onpointerleave', 'onpointermove', 'onpointerout', 'onpointerover', 'onpointerrawupdate', 'onpointerup', 'onprogress', 'onpropertychange', 'onratechange', 'onreadystatechange', 'onrepeat', 'onreset', 'onresize', 'onresizeend', 'onresizestart', 'onresume', 'onreverse', 'onrowdelete', 'onrowenter', 'onrowexit', 'onrowinserted', 'onscroll', 'onscrollend', 'onsearch', 'onseek', 'onseeked', 'onseeking', 'onselect', 'onselectionchange', 'onselectstart', 'onshow', 'onstalled', 'onstart', 'onstop', 'onstorage', 'onsubmit', 'onsuspend', 'onsynchrestored', 'ontimeerror', 'ontimeupdate', 'ontoggle', 'ontrackchange', 'ontransitioncancel', 'ontransitionend', 'ontransitionrun', 'ontransitionstart', 'onunload', 'onurlflip', 'onvolumechange', 'onwaiting', 'onwebkitanimationend', 'onwebkitanimationiteration', 'onwebkitanimationstart', 'onwebkitfullscreenchange', 'onwebkitfullscreenerror', 'onwebkittransitionend', 'onwheel'];\n/**\n * Returns an array of all event handlers. Some of the event handlers may be\n * supported only in some browsers.\n *\n * For every event type that the browser supports, SVG supports that as an event\n * attribute, following the same requirements as for HTML event attributes.\n * https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/Events\n *\n * @return {!Array<string>}\n */\n\nfunction getUnsafeAttributeEventHandlers() {\n  if (typeof window !== 'undefined') {\n    const eventHandlers = [];\n\n    for (const name in HTMLElement.prototype) {\n      if (name.slice(0, 2) === 'on') {\n        eventHandlers.push(name);\n      }\n    }\n\n    return eventHandlers;\n  } else {\n    return unsafeAttributeEventHandlers;\n  }\n}\n/**\n * @license\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n */\n\n\nconst isBrowser = typeof window !== 'undefined';\n\nconst rejectInputFn = s => {\n  throw new TypeError('undefined conversion');\n};\n\nconst rejectInputDefaultPolicyFn = s => null;\n\nconst _String$prototype = String.prototype,\n      toLowerCase = _String$prototype.toLowerCase,\n      toUpperCase = _String$prototype.toUpperCase;\nconst HTML_NS = 'http://www.w3.org/1999/xhtml';\nconst XLINK_NS = 'http://www.w3.org/1999/xlink';\nconst SVG_NS = 'http://www.w3.org/2000/svg';\n/**\n * @constructor\n * @property {!function(string):TrustedHTML} createHTML\n * @property {!function(string):TrustedURL} createURL\n * @property {!function(string):TrustedScriptURL} createScriptURL\n * @property {!function(string):TrustedScript} createScript\n * @property {!string} name\n */\n\nconst TrustedTypePolicy = function () {\n  throw new TypeError('Illegal constructor');\n};\n/**\n * @constructor\n */\n\n\nconst TrustedTypePolicyFactory = function () {\n  throw new TypeError('Illegal constructor');\n};\n/* eslint-enable no-unused-vars */\n\n\nconst DEFAULT_POLICY_NAME = 'default';\n\nconst trustedTypesBuilderTestOnly = function () {\n  // Capture common names early.\n  const assign = Object.assign,\n        create = Object.create,\n        defineProperty = Object.defineProperty,\n        freeze = Object.freeze,\n        getOwnPropertyNames = Object.getOwnPropertyNames,\n        getPrototypeOf = Object.getPrototypeOf,\n        ObjectPrototype = Object.prototype;\n  const hasOwnProperty = ObjectPrototype.hasOwnProperty;\n  const _Array$prototype = Array.prototype,\n        forEach = _Array$prototype.forEach,\n        push = _Array$prototype.push;\n  const creatorSymbol = Symbol();\n  /**\n   * Getter for the privateMap.\n   * @param  {Object} obj Key of the privateMap\n   * @return {Object<string, string>} Private storage.\n   */\n\n  const privates = function (obj) {\n    let v = privateMap.get(obj);\n\n    if (v === undefined) {\n      v = create(null); // initialize the private storage.\n\n      privateMap.set(obj, v);\n    }\n\n    return v;\n  };\n  /**\n   * Called before attacker-controlled code on an internal collections,\n   * copies prototype members onto the instance directly, so that later\n   * changes to prototypes cannot expose collection internals.\n   * @param {!T} collection\n   * @return {!T} collection\n   * @template T\n   */\n\n\n  function selfContained(collection) {\n    const proto = getPrototypeOf(collection);\n\n    if (proto == null || getPrototypeOf(proto) !== ObjectPrototype) {\n      throw new Error(); // Loop below is insufficient.\n    }\n\n    for (const key of getOwnPropertyNames(proto)) {\n      defineProperty(collection, key, {\n        value: collection[key]\n      });\n    }\n\n    return collection;\n  }\n  /**\n   * Map for private properties of Trusted Types object.\n   * This is so that the access to the type constructor does not give\n   * the ability to create typed values.\n   * @type {WeakMap}\n   */\n\n\n  const privateMap = selfContained(new WeakMap());\n  /**\n   * List of all configured policy names.\n   * @type {Array<string>}\n   */\n\n  const policyNames = selfContained([]);\n  /**\n   * Allowed policy namess for policy names.\n   * @type {Array<string>}\n   */\n\n  const allowedNames = selfContained([]);\n  /**\n   * A reference to a default policy, if created.\n   * @type {TrustedTypePolicy}\n   */\n\n  let defaultPolicy = null;\n  /**\n   * Whether to enforce allowedNames in createPolicy().\n   * @type {boolean}\n   */\n\n  let enforceNameWhitelist = false;\n  /**\n   * A value that is trusted to have certain security-relevant properties\n   * because the sources of such values are controlled.\n   */\n\n  class TrustedType {\n    /**\n     * Constructor for TrustedType. Only allowed to be called from within a\n     * policy.\n     * @param {symbol} s creatorSymbol\n     * @param {string} policyName The name of the policy this object was\n     *   created by.\n     */\n    constructor(s, policyName) {\n      // TODO: Figure out if symbol is needed, if the value is in privateMap.\n      if (s !== creatorSymbol) {\n        throw new Error('cannot call the constructor');\n      }\n\n      defineProperty(this, 'policyName', {\n        value: '' + policyName,\n        enumerable: true\n      });\n    }\n    /**\n     * Returns the wrapped string value of the object.\n     * @return {string}\n     * @override\n     */\n\n\n    toString() {\n      return privates(this)['v'];\n    }\n    /**\n     * Returns the wrapped string value of the object.\n     * @return {string}\n     * @override\n     */\n\n\n    valueOf() {\n      return privates(this)['v'];\n    }\n\n  }\n  /**\n   * @param {function(new:TrustedType, symbol, string)} SubClass\n   * @param {string} canonName The class name which should be independent of\n   *     any renaming pass and which is relied upon by the enforcer and for\n   *     native type interop.\n   */\n\n\n  function lockdownTrustedType(SubClass, canonName) {\n    freeze(SubClass.prototype);\n    delete SubClass.name;\n    defineProperty(SubClass, 'name', {\n      value: canonName\n    });\n  }\n  /**\n   * Trusted URL object wrapping a string that can only be created from a\n   * TT policy.\n   */\n\n\n  class TrustedURL extends TrustedType {}\n\n  lockdownTrustedType(TrustedURL, 'TrustedURL');\n  /**\n   * Trusted Script URL object wrapping a string that can only be created from a\n   * TT policy.\n   */\n\n  class TrustedScriptURL extends TrustedType {}\n\n  lockdownTrustedType(TrustedScriptURL, 'TrustedScriptURL');\n  /**\n   * Trusted HTML object wrapping a string that can only be created from a\n   * TT policy.\n   */\n\n  class TrustedHTML extends TrustedType {}\n\n  lockdownTrustedType(TrustedHTML, 'TrustedHTML');\n  /**\n   * Trusted Script object wrapping a string that can only be created from a\n   * TT policy.\n   */\n\n  class TrustedScript extends TrustedType {}\n\n  lockdownTrustedType(TrustedScript, 'TrustedScript');\n  lockdownTrustedType(TrustedType, 'TrustedType'); // Common constants.\n\n  const emptyHTML = freeze(create(new TrustedHTML(creatorSymbol, '')));\n  privates(emptyHTML)['v'] = '';\n  /**\n   * A map of attribute / property names to allowed types\n   * for known namespaces.\n   * @type {!Object<string,!TrustedTypesTypeMap>}\n   * @export\n   */\n\n  const TYPE_MAP = {\n    [HTML_NS]: {\n      // TODO(koto): Figure out what to to with <link>\n      'A': {\n        'attributes': {\n          'href': TrustedURL.name\n        }\n      },\n      'AREA': {\n        'attributes': {\n          'href': TrustedURL.name\n        }\n      },\n      'BASE': {\n        'attributes': {\n          'href': TrustedURL.name\n        }\n      },\n      'BUTTON': {\n        'attributes': {\n          'formaction': TrustedURL.name\n        }\n      },\n      'EMBED': {\n        'attributes': {\n          'src': TrustedScriptURL.name\n        }\n      },\n      'FORM': {\n        'attributes': {\n          'action': TrustedURL.name\n        }\n      },\n      'FRAME': {\n        'attributes': {\n          'src': TrustedURL.name\n        }\n      },\n      'IFRAME': {\n        'attributes': {\n          'src': TrustedURL.name,\n          'srcdoc': TrustedHTML.name\n        }\n      },\n      'INPUT': {\n        'attributes': {\n          'formaction': TrustedURL.name\n        }\n      },\n      'OBJECT': {\n        'attributes': {\n          'data': TrustedScriptURL.name,\n          'codebase': TrustedScriptURL.name\n        }\n      },\n      // TODO(koto): Figure out what to do with portals.\n      'SCRIPT': {\n        'attributes': {\n          'src': TrustedScriptURL.name,\n          'text': TrustedScript.name\n        },\n        'properties': {\n          'innerText': TrustedScript.name,\n          'textContent': TrustedScript.name,\n          'text': TrustedScript.name\n        }\n      },\n      '*': {\n        'attributes': {},\n        'properties': {\n          'innerHTML': TrustedHTML.name,\n          'outerHTML': TrustedHTML.name\n        }\n      }\n    },\n    [XLINK_NS]: {\n      '*': {\n        'attributes': {\n          'href': TrustedURL.name\n        },\n        'properties': {}\n      }\n    },\n    [SVG_NS]: {\n      '*': {\n        'attributes': {\n          'href': TrustedURL.name\n        },\n        'properties': {}\n      }\n    }\n  };\n  /**\n   * A map of element property to HTML attribute names.\n   * @type {!Object<string, string>}\n   */\n\n  const ATTR_PROPERTY_MAP = {\n    'codebase': 'codeBase',\n    'formaction': 'formAction'\n  }; // Edge doesn't support srcdoc.\n\n  if (isBrowser && !('srcdoc' in HTMLIFrameElement.prototype)) {\n    delete TYPE_MAP[HTML_NS]['IFRAME']['attributes']['srcdoc'];\n  } // in HTML, clone attributes into properties.\n\n\n  for (const tag of Object.keys(TYPE_MAP[HTML_NS])) {\n    if (!TYPE_MAP[HTML_NS][tag]['properties']) {\n      TYPE_MAP[HTML_NS][tag]['properties'] = {};\n    }\n\n    for (const attr of Object.keys(TYPE_MAP[HTML_NS][tag]['attributes'])) {\n      TYPE_MAP[HTML_NS][tag]['properties'][ATTR_PROPERTY_MAP[attr] ? ATTR_PROPERTY_MAP[attr] : attr] = TYPE_MAP[HTML_NS][tag]['attributes'][attr];\n    }\n  } // Add inline event handlers attribute names.\n\n\n  for (const name of getUnsafeAttributeEventHandlers()) {\n    TYPE_MAP[HTML_NS]['*']['attributes'][name] = 'TrustedScript';\n    TYPE_MAP[SVG_NS]['*']['attributes'][name] = 'TrustedScript';\n  }\n  /**\n   * @type {!Object<string,!Function>}\n   */\n\n\n  const createTypeMapping = {\n    'createHTML': TrustedHTML,\n    'createScriptURL': TrustedScriptURL,\n    'createURL': TrustedURL,\n    'createScript': TrustedScript\n  };\n  const createFunctionAllowed = createTypeMapping.hasOwnProperty;\n  /**\n   * Function generating a type checker.\n   * @template T\n   * @param  {T} type The type to check against.\n   * @return {function(*):boolean}\n   */\n\n  function isTrustedTypeChecker(type) {\n    return obj => obj instanceof type && privateMap.has(obj);\n  }\n  /**\n   * Wraps a user-defined policy rules with TT constructor\n   * @param  {string} policyName The policy name\n   * @param  {TrustedTypesInnerPolicy} innerPolicy InnerPolicy\n   * @return {!TrustedTypePolicy} Frozen policy object\n   */\n\n\n  function wrapPolicy(policyName, innerPolicy) {\n    /**\n     * @template T\n     * @param {function(new:T, symbol, string)} Ctor a trusted type constructor\n     * @param {string} methodName the policy factory method name\n     * @return {function(string):!T} a factory that produces instances of Ctor.\n     */\n    function creator(Ctor, methodName) {\n      // This causes thisValue to be null when called below.\n      const method = innerPolicy[methodName] || (policyName == DEFAULT_POLICY_NAME ? rejectInputDefaultPolicyFn : rejectInputFn);\n      const policySpecificType = freeze(new Ctor(creatorSymbol, policyName));\n      const factory = {\n        [methodName](s, ...args) {\n          // Trick to get methodName to show in stacktrace.\n          let result = method('' + s, ...args);\n\n          if (result === undefined || result === null) {\n            if (policyName == DEFAULT_POLICY_NAME) {\n              // These values mean that the input was rejected. This will cause\n              // a violation later, don't create types for them.\n              return result;\n            }\n\n            result = '';\n          }\n\n          const allowedValue = '' + result;\n          const o = freeze(create(policySpecificType));\n          privates(o)['v'] = allowedValue;\n          return o;\n        }\n\n      }[methodName];\n      return freeze(factory);\n    }\n\n    const policy = create(TrustedTypePolicy.prototype);\n\n    for (const name of getOwnPropertyNames(createTypeMapping)) {\n      policy[name] = creator(createTypeMapping[name], name);\n    }\n\n    defineProperty(policy, 'name', {\n      value: policyName,\n      writable: false,\n      configurable: false,\n      enumerable: true\n    });\n    return (\n      /** @type {!TrustedTypePolicy} */\n      freeze(policy)\n    );\n  }\n  /**\n   * Returns the name of the trusted type required for a given element\n   *   attribute.\n   * @param {string} tagName The name of the tag of the element.\n   * @param {string} attribute The name of the attribute.\n   * @param {string=} elementNs Element namespace.\n   * @param {string=} attributeNs The attribute namespace.\n   * @return {string?} Required type name or null, if a Trusted\n   *   Type is not required.\n   */\n\n\n  function getAttributeType(tagName, attribute, elementNs = '', attributeNs = '') {\n    const canonicalAttr = toLowerCase.apply(String(attribute));\n    return getTypeInternal_(tagName, 'attributes', canonicalAttr, elementNs, attributeNs) || null;\n  }\n  /**\n   * Returns a type name from a type map.\n   * @param {string} tag A tag name.\n   * @param {string} container 'attributes' or 'properties'\n   * @param {string} name The attribute / property name.\n   * @param {string=} elNs Element namespace.\n   * @param {string=} attrNs Attribute namespace.\n   * @return {string|undefined}\n   * @private\n   */\n\n\n  function getTypeInternal_(tag, container, name, elNs = '', attrNs = '') {\n    const canonicalTag = toUpperCase.apply(String(tag));\n    let ns = attrNs ? attrNs : elNs;\n\n    if (!ns) {\n      ns = HTML_NS;\n    }\n\n    const map = hasOwnProperty.apply(TYPE_MAP, [ns]) ? TYPE_MAP[ns] : null;\n\n    if (!map) {\n      return;\n    }\n\n    if (hasOwnProperty.apply(map, [canonicalTag]) && map[canonicalTag] && hasOwnProperty.apply(map[canonicalTag][container], [name]) && map[canonicalTag][container][name]) {\n      return map[canonicalTag][container][name];\n    }\n\n    if (hasOwnProperty.apply(map, ['*']) && hasOwnProperty.apply(map['*'][container], [name]) && map['*'][container][name]) {\n      return map['*'][container][name];\n    }\n  }\n  /**\n   * Returns the name of the trusted type required for a given element property.\n   * @param {string} tagName The name of the tag of the element.\n   * @param {string} property The property.\n   * @param {string=} elementNs Element namespace.\n   * @return {string?} Required type name or null, if a Trusted\n   *   Type is not required.\n   */\n\n\n  function getPropertyType(tagName, property, elementNs = '') {\n    // TODO: Support namespaces.\n    return getTypeInternal_(tagName, 'properties', String(property), elementNs) || null;\n  }\n  /**\n   * Returns the type map-like object, that resolves a name of a type for a\n   * given tag + attribute / property in a given namespace.\n   * The keys of the map are uppercase tag names. Map entry has mappings between\n   * a lowercase attribute name / case-sensitive property name and a name of the\n   * type that is required for that attribute / property.\n   * Example entry for 'IMG': {\"attributes\": {\"src\": \"TrustedHTML\"}}\n   * @param {string=} namespaceUri The namespace URI (will use the current\n   *   document namespace URI if omitted).\n   * @return {TrustedTypesTypeMap}\n   */\n\n\n  function getTypeMapping(namespaceUri = '') {\n    if (!namespaceUri) {\n      try {\n        namespaceUri = document.documentElement.namespaceURI;\n      } catch (e) {\n        namespaceUri = HTML_NS;\n      }\n    }\n    /**\n     * @template T\n     * @private\n     * @param {T} o\n     * @return {T}\n     */\n\n\n    function deepClone(o) {\n      return JSON.parse(JSON.stringify(o));\n    }\n\n    const map = TYPE_MAP[namespaceUri];\n\n    if (!map) {\n      return {};\n    }\n\n    return deepClone(map);\n  }\n  /**\n   * Returns all configured policy names (even for non-exposed policies).\n   * @return {!Array<string>}\n   */\n\n\n  function getPolicyNames() {\n    // TODO(msamuel): Should we sort policyNames to avoid leaking or\n    // encouraging dependency on the order in which policy names are\n    // registered?  I think JavaScript builtin sorts are efficient for\n    // almost-sorted lists so the amortized cost is close to O(n).\n    return policyNames.slice();\n  }\n  /**\n   * Creates a TT policy.\n   *\n   * Returns a frozen object representing a policy - a collection of functions\n   * that may create TT objects based on the user-provided rules specified\n   * in the policy object.\n   *\n   * @param  {string} name A unique name of the policy.\n   * @param  {TrustedTypesInnerPolicy} policy Policy rules object.\n   * @return {TrustedTypePolicy} The policy that may create TT objects\n   *   according to the policy rules.\n   */\n\n\n  function createPolicy(name, policy) {\n    const pName = '' + name; // Assert it's a string\n\n    if (enforceNameWhitelist && allowedNames.indexOf(pName) === -1) {\n      throw new TypeError('Policy ' + pName + ' disallowed.');\n    }\n\n    if (enforceNameWhitelist && policyNames.indexOf(pName) !== -1) {\n      throw new TypeError('Policy ' + pName + ' exists.');\n    } // Register the name early so that if policy getters unwisely calls\n    // across protection domains to code that reenters this function,\n    // policy author still has rights to the name.\n\n\n    policyNames.push(pName); // Only copy own properties of names present in createTypeMapping.\n\n    const innerPolicy = create(null);\n\n    if (policy && typeof policy === 'object') {\n      // Treat non-objects as empty policies.\n      for (const key of getOwnPropertyNames(policy)) {\n        if (createFunctionAllowed.call(createTypeMapping, key)) {\n          innerPolicy[key] = policy[key];\n        }\n      }\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn('trustedTypes.createPolicy ' + pName + ' was given an empty policy');\n    }\n\n    freeze(innerPolicy);\n    const wrappedPolicy = wrapPolicy(pName, innerPolicy);\n\n    if (pName === DEFAULT_POLICY_NAME) {\n      defaultPolicy = wrappedPolicy;\n    }\n\n    return wrappedPolicy;\n  }\n  /**\n   * Applies the policy name whitelist.\n   * @param {!Array<string>} allowedPolicyNames\n   */\n\n\n  function setAllowedPolicyNames(allowedPolicyNames) {\n    if (allowedPolicyNames.indexOf('*') !== -1) {\n      // Any policy name is allowed.\n      enforceNameWhitelist = false;\n    } else {\n      enforceNameWhitelist = true;\n      allowedNames.length = 0;\n      forEach.call(allowedPolicyNames, el => {\n        push.call(allowedNames, '' + el);\n      });\n    }\n  }\n  /**\n   * Returns the default policy, or null if it was not created.\n   * @return {TrustedTypePolicy}\n   */\n\n\n  function getDefaultPolicy() {\n    return defaultPolicy;\n  }\n  /**\n   * Resets the default policy.\n   */\n\n\n  function resetDefaultPolicy() {\n    defaultPolicy = null;\n    policyNames.splice(policyNames.indexOf(DEFAULT_POLICY_NAME), 1);\n  }\n\n  const api = create(TrustedTypePolicyFactory.prototype);\n  assign(api, {\n    // The main function to create policies.\n    createPolicy,\n    getPolicyNames,\n    // Type checkers, also validating the object was initialized through a\n    // policy.\n    isHTML: isTrustedTypeChecker(TrustedHTML),\n    isURL: isTrustedTypeChecker(TrustedURL),\n    isScriptURL: isTrustedTypeChecker(TrustedScriptURL),\n    isScript: isTrustedTypeChecker(TrustedScript),\n    getAttributeType,\n    getPropertyType,\n    getTypeMapping,\n    emptyHTML,\n    defaultPolicy,\n    // Just to make the compiler happy, this is overridden below.\n    TrustedHTML: TrustedHTML,\n    TrustedURL: TrustedURL,\n    TrustedScriptURL: TrustedScriptURL,\n    TrustedScript: TrustedScript\n  });\n  defineProperty(api, 'defaultPolicy', {\n    get: getDefaultPolicy,\n    set: () => {}\n  });\n  return {\n    trustedTypes: freeze(api),\n    setAllowedPolicyNames,\n    getDefaultPolicy,\n    resetDefaultPolicy\n  };\n};\n\nconst _trustedTypesBuilderT = trustedTypesBuilderTestOnly(),\n      trustedTypes = _trustedTypesBuilderT.trustedTypes,\n      setAllowedPolicyNames = _trustedTypesBuilderT.setAllowedPolicyNames,\n      getDefaultPolicy = _trustedTypesBuilderT.getDefaultPolicy,\n      resetDefaultPolicy = _trustedTypesBuilderT.resetDefaultPolicy;\n/**\n * @license\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n */\n\n\nconst tt = trustedTypes;\n/**\n * Sets up the public Trusted Types API in the global object.\n */\n\nfunction setupPolyfill() {\n  // We use array accessors to make sure Closure compiler will not alter the\n  // names of the properties..\n  // we setup the polyfill only in browser environment.\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  const rootProperty = 'trustedTypes'; // Convert old window.TrustedTypes to window.trustedTypes.\n\n  if (window['TrustedTypes'] && typeof window[rootProperty] === 'undefined') {\n    window[rootProperty] = Object.freeze(window['TrustedTypes']);\n  }\n\n  if (typeof window[rootProperty] !== 'undefined') {\n    return;\n  }\n\n  const publicApi = Object.create(TrustedTypePolicyFactory.prototype);\n  Object.assign(publicApi, {\n    'isHTML': tt.isHTML,\n    'isURL': tt.isURL,\n    'isScriptURL': tt.isScriptURL,\n    'isScript': tt.isScript,\n    'createPolicy': tt.createPolicy,\n    'getPolicyNames': tt.getPolicyNames,\n    'getAttributeType': tt.getAttributeType,\n    'getPropertyType': tt.getPropertyType,\n    'getTypeMapping': tt.getTypeMapping,\n    'emptyHTML': tt.emptyHTML,\n    '_isPolyfill_': true\n  });\n  Object.defineProperty(publicApi, 'defaultPolicy', Object.getOwnPropertyDescriptor(tt, 'defaultPolicy') || {});\n  window[rootProperty] = Object.freeze(publicApi);\n  window['TrustedHTML'] = tt.TrustedHTML;\n  window['TrustedURL'] = tt.TrustedURL;\n  window['TrustedScriptURL'] = tt.TrustedScriptURL;\n  window['TrustedScript'] = tt.TrustedScript;\n  window['TrustedTypePolicy'] = TrustedTypePolicy;\n  window['TrustedTypePolicyFactory'] = TrustedTypePolicyFactory;\n}\n\nsetupPolyfill();\nexport default tt;","map":{"version":3,"sources":["/Users/myaaaicey/Documents/playground/test-trusted-types/app/node_modules/trusted-types/build/esm/trustedtypes.api_only.js"],"names":["unsafeAttributeEventHandlers","getUnsafeAttributeEventHandlers","window","eventHandlers","name","HTMLElement","prototype","slice","push","isBrowser","rejectInputFn","s","TypeError","rejectInputDefaultPolicyFn","String","toLowerCase","toUpperCase","HTML_NS","XLINK_NS","SVG_NS","TrustedTypePolicy","TrustedTypePolicyFactory","DEFAULT_POLICY_NAME","trustedTypesBuilderTestOnly","assign","Object","create","defineProperty","freeze","getOwnPropertyNames","getPrototypeOf","ObjectPrototype","hasOwnProperty","Array","forEach","creatorSymbol","Symbol","privates","obj","v","privateMap","get","undefined","set","selfContained","collection","proto","Error","key","value","WeakMap","policyNames","allowedNames","defaultPolicy","enforceNameWhitelist","TrustedType","constructor","policyName","enumerable","toString","valueOf","lockdownTrustedType","SubClass","canonName","TrustedURL","TrustedScriptURL","TrustedHTML","TrustedScript","emptyHTML","TYPE_MAP","ATTR_PROPERTY_MAP","HTMLIFrameElement","tag","keys","attr","createTypeMapping","createFunctionAllowed","isTrustedTypeChecker","type","has","wrapPolicy","innerPolicy","creator","Ctor","methodName","method","policySpecificType","factory","args","result","allowedValue","o","policy","writable","configurable","getAttributeType","tagName","attribute","elementNs","attributeNs","canonicalAttr","apply","getTypeInternal_","container","elNs","attrNs","canonicalTag","ns","map","getPropertyType","property","getTypeMapping","namespaceUri","document","documentElement","namespaceURI","e","deepClone","JSON","parse","stringify","getPolicyNames","createPolicy","pName","indexOf","call","console","warn","wrappedPolicy","setAllowedPolicyNames","allowedPolicyNames","length","el","getDefaultPolicy","resetDefaultPolicy","splice","api","isHTML","isURL","isScriptURL","isScript","trustedTypes","tt","setupPolyfill","rootProperty","publicApi","getOwnPropertyDescriptor"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n */\n\n// TODO check attributes in safari, remove legacy safe handlers\nconst unsafeAttributeEventHandlers = [\n  'onabort',\n  'onactivate',\n  'onactivateinvisible',\n  'onafterprint',\n  'onafterupdate',\n  'onanimationcancel',\n  'onanimationend',\n  'onanimationiteration',\n  'onanimationstart',\n  'onariarequest',\n  'onauxclick',\n  'onbeforeactivate',\n  'onbeforecopy',\n  'onbeforecut',\n  'onbeforedeactivate',\n  'onbeforeeditfocus',\n  'onbeforepaste',\n  'onbeforeprint',\n  'onbeforeunload',\n  'onbegin',\n  'onblur',\n  'onbounce',\n  'oncancel',\n  'oncanplay',\n  'oncanplaythrough',\n  'oncellchange',\n  'onchange',\n  'onclick',\n  'onclose',\n  'oncommand',\n  'oncontextmenu',\n  'oncontrolselect',\n  'oncopy',\n  'oncuechange',\n  'oncut',\n  'ondataavailable',\n  'ondatasetchanged',\n  'ondatasetcomplete',\n  'ondblclick',\n  'ondeactivate',\n  'ondrag',\n  'ondragdrop',\n  'ondragend',\n  'ondragenter',\n  'ondragexit',\n  'ondragleave',\n  'ondragover',\n  'ondragstart',\n  'ondrop',\n  'ondurationchange',\n  'onemptied',\n  'onend',\n  'onended',\n  'onerror',\n  'onerrorupdate',\n  'onexit',\n  'onfilterchange',\n  'onfinish',\n  'onfocus',\n  'onfocusin',\n  'onfocusout',\n  'onformdata',\n  'onfullscreenchange',\n  'onfullscreenerror',\n  'ongotpointercapture',\n  'onhelp',\n  'oninput',\n  'oninvalid',\n  'onkeydown',\n  'onkeypress',\n  'onkeyup',\n  'onlayoutcomplete',\n  'onload',\n  'onloadeddata',\n  'onloadedmetadata',\n  'onloadend',\n  'onloadstart',\n  'onlosecapture',\n  'onlostpointercapture',\n  'onmediacomplete',\n  'onmediaerror',\n  'onmessage',\n  'onmousedown',\n  'onmouseenter',\n  'onmouseleave',\n  'onmousemove',\n  'onmouseout',\n  'onmouseover',\n  'onmouseup',\n  'onmousewheel',\n  'onmove',\n  'onmoveend',\n  'onmovestart',\n  'onmozfullscreenchange',\n  'onmozfullscreenerror',\n  'onmscontentzoom',\n  'onmsgesturechange',\n  'onmsgesturedoubletap',\n  'onmsgestureend',\n  'onmsgesturehold',\n  'onmsgesturestart',\n  'onmsgesturetap',\n  'onmsgotpointercapture',\n  'onmsinertiastart',\n  'onmslostpointercapture',\n  'onmsmanipulationstatechanged',\n  'onmspointercancel',\n  'onmspointerdown',\n  'onmspointerenter',\n  'onmspointerleave',\n  'onmspointermove',\n  'onmspointerout',\n  'onmspointerover',\n  'onmspointerup',\n  'onoffline',\n  'ononline',\n  'onoutofsync',\n  'onoverscroll',\n  'onpaste',\n  'onpause',\n  'onplay',\n  'onplaying',\n  'onpointercancel',\n  'onpointerdown',\n  'onpointerenter',\n  'onpointerleave',\n  'onpointermove',\n  'onpointerout',\n  'onpointerover',\n  'onpointerrawupdate',\n  'onpointerup',\n  'onprogress',\n  'onpropertychange',\n  'onratechange',\n  'onreadystatechange',\n  'onrepeat',\n  'onreset',\n  'onresize',\n  'onresizeend',\n  'onresizestart',\n  'onresume',\n  'onreverse',\n  'onrowdelete',\n  'onrowenter',\n  'onrowexit',\n  'onrowinserted',\n  'onscroll',\n  'onscrollend',\n  'onsearch',\n  'onseek',\n  'onseeked',\n  'onseeking',\n  'onselect',\n  'onselectionchange',\n  'onselectstart',\n  'onshow',\n  'onstalled',\n  'onstart',\n  'onstop',\n  'onstorage',\n  'onsubmit',\n  'onsuspend',\n  'onsynchrestored',\n  'ontimeerror',\n  'ontimeupdate',\n  'ontoggle',\n  'ontrackchange',\n  'ontransitioncancel',\n  'ontransitionend',\n  'ontransitionrun',\n  'ontransitionstart',\n  'onunload',\n  'onurlflip',\n  'onvolumechange',\n  'onwaiting',\n  'onwebkitanimationend',\n  'onwebkitanimationiteration',\n  'onwebkitanimationstart',\n  'onwebkitfullscreenchange',\n  'onwebkitfullscreenerror',\n  'onwebkittransitionend',\n  'onwheel',\n];\n\n/**\n * Returns an array of all event handlers. Some of the event handlers may be\n * supported only in some browsers.\n *\n * For every event type that the browser supports, SVG supports that as an event\n * attribute, following the same requirements as for HTML event attributes.\n * https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/Events\n *\n * @return {!Array<string>}\n */\nfunction getUnsafeAttributeEventHandlers() {\n  if (typeof window !== 'undefined') {\n    const eventHandlers = [];\n    for (const name in HTMLElement.prototype) {\n      if (name.slice(0, 2) === 'on') {\n        eventHandlers.push(name);\n      }\n    }\n    return eventHandlers;\n  } else {\n    return unsafeAttributeEventHandlers;\n  }\n}\n\n/**\n * @license\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n */\n\nconst isBrowser = typeof window !== 'undefined';\n\nconst rejectInputFn = (s) => {\n  throw new TypeError('undefined conversion');\n};\n\nconst rejectInputDefaultPolicyFn = (s) => null;\n\nconst {toLowerCase, toUpperCase} = String.prototype;\n\nconst HTML_NS = 'http://www.w3.org/1999/xhtml';\nconst XLINK_NS = 'http://www.w3.org/1999/xlink';\nconst SVG_NS = 'http://www.w3.org/2000/svg';\n\n/**\n * @constructor\n * @property {!function(string):TrustedHTML} createHTML\n * @property {!function(string):TrustedURL} createURL\n * @property {!function(string):TrustedScriptURL} createScriptURL\n * @property {!function(string):TrustedScript} createScript\n * @property {!string} name\n */\nconst TrustedTypePolicy = function() {\n  throw new TypeError('Illegal constructor');\n};\n\n/**\n * @constructor\n */\nconst TrustedTypePolicyFactory = function() {\n  throw new TypeError('Illegal constructor');\n};\n/* eslint-enable no-unused-vars */\n\nconst DEFAULT_POLICY_NAME = 'default';\n\n\nconst trustedTypesBuilderTestOnly = function() {\n  // Capture common names early.\n  const {\n    assign, create, defineProperty, freeze, getOwnPropertyNames,\n    getPrototypeOf, prototype: ObjectPrototype,\n  } = Object;\n\n  const {hasOwnProperty} = ObjectPrototype;\n\n  const {\n    forEach, push,\n  } = Array.prototype;\n\n  const creatorSymbol = Symbol();\n\n  /**\n   * Getter for the privateMap.\n   * @param  {Object} obj Key of the privateMap\n   * @return {Object<string, string>} Private storage.\n   */\n  const privates = function(obj) {\n    let v = privateMap.get(obj);\n    if (v === undefined) {\n      v = create(null); // initialize the private storage.\n      privateMap.set(obj, v);\n    }\n    return v;\n  };\n\n  /**\n   * Called before attacker-controlled code on an internal collections,\n   * copies prototype members onto the instance directly, so that later\n   * changes to prototypes cannot expose collection internals.\n   * @param {!T} collection\n   * @return {!T} collection\n   * @template T\n   */\n  function selfContained(collection) {\n    const proto = getPrototypeOf(collection);\n    if (proto == null || getPrototypeOf(proto) !== ObjectPrototype) {\n      throw new Error(); // Loop below is insufficient.\n    }\n    for (const key of getOwnPropertyNames(proto)) {\n      defineProperty(collection, key, {value: collection[key]});\n    }\n    return collection;\n  }\n\n  /**\n   * Map for private properties of Trusted Types object.\n   * This is so that the access to the type constructor does not give\n   * the ability to create typed values.\n   * @type {WeakMap}\n   */\n  const privateMap = selfContained(new WeakMap());\n\n  /**\n   * List of all configured policy names.\n   * @type {Array<string>}\n   */\n  const policyNames = selfContained([]);\n\n  /**\n   * Allowed policy namess for policy names.\n   * @type {Array<string>}\n   */\n  const allowedNames = selfContained([]);\n\n  /**\n   * A reference to a default policy, if created.\n   * @type {TrustedTypePolicy}\n   */\n  let defaultPolicy = null;\n\n  /**\n   * Whether to enforce allowedNames in createPolicy().\n   * @type {boolean}\n   */\n  let enforceNameWhitelist = false;\n\n\n  /**\n   * A value that is trusted to have certain security-relevant properties\n   * because the sources of such values are controlled.\n   */\n  class TrustedType {\n    /**\n     * Constructor for TrustedType. Only allowed to be called from within a\n     * policy.\n     * @param {symbol} s creatorSymbol\n     * @param {string} policyName The name of the policy this object was\n     *   created by.\n     */\n    constructor(s, policyName) {\n      // TODO: Figure out if symbol is needed, if the value is in privateMap.\n      if (s !== creatorSymbol) {\n        throw new Error('cannot call the constructor');\n      }\n      defineProperty(this, 'policyName',\n          {value: '' + policyName, enumerable: true});\n    }\n\n    /**\n     * Returns the wrapped string value of the object.\n     * @return {string}\n     * @override\n     */\n    toString() {\n      return privates(this)['v'];\n    }\n\n    /**\n     * Returns the wrapped string value of the object.\n     * @return {string}\n     * @override\n     */\n    valueOf() {\n      return privates(this)['v'];\n    }\n  }\n\n  /**\n   * @param {function(new:TrustedType, symbol, string)} SubClass\n   * @param {string} canonName The class name which should be independent of\n   *     any renaming pass and which is relied upon by the enforcer and for\n   *     native type interop.\n   */\n  function lockdownTrustedType(SubClass, canonName) {\n    freeze(SubClass.prototype);\n    delete SubClass.name;\n    defineProperty(SubClass, 'name', {value: canonName});\n  }\n\n  /**\n   * Trusted URL object wrapping a string that can only be created from a\n   * TT policy.\n   */\n  class TrustedURL extends TrustedType {\n  }\n  lockdownTrustedType(TrustedURL, 'TrustedURL');\n\n  /**\n   * Trusted Script URL object wrapping a string that can only be created from a\n   * TT policy.\n   */\n  class TrustedScriptURL extends TrustedType {\n  }\n  lockdownTrustedType(TrustedScriptURL, 'TrustedScriptURL');\n\n  /**\n   * Trusted HTML object wrapping a string that can only be created from a\n   * TT policy.\n   */\n  class TrustedHTML extends TrustedType {\n  }\n  lockdownTrustedType(TrustedHTML, 'TrustedHTML');\n\n  /**\n   * Trusted Script object wrapping a string that can only be created from a\n   * TT policy.\n   */\n  class TrustedScript extends TrustedType {\n  }\n  lockdownTrustedType(TrustedScript, 'TrustedScript');\n\n  lockdownTrustedType(TrustedType, 'TrustedType');\n\n  // Common constants.\n  const emptyHTML = freeze(create(new TrustedHTML(creatorSymbol, '')));\n  privates(emptyHTML)['v'] = '';\n\n  /**\n   * A map of attribute / property names to allowed types\n   * for known namespaces.\n   * @type {!Object<string,!TrustedTypesTypeMap>}\n   * @export\n   */\n  const TYPE_MAP = {\n    [HTML_NS]: {\n      // TODO(koto): Figure out what to to with <link>\n      'A': {\n        'attributes': {\n          'href': TrustedURL.name,\n        },\n      },\n      'AREA': {\n        'attributes': {\n          'href': TrustedURL.name,\n        },\n      },\n      'BASE': {\n        'attributes': {\n          'href': TrustedURL.name,\n        },\n      },\n      'BUTTON': {\n        'attributes': {\n          'formaction': TrustedURL.name,\n        },\n      },\n      'EMBED': {\n        'attributes': {\n          'src': TrustedScriptURL.name,\n        },\n      },\n      'FORM': {\n        'attributes': {\n          'action': TrustedURL.name,\n        },\n      },\n      'FRAME': {\n        'attributes': {\n          'src': TrustedURL.name,\n        },\n      },\n      'IFRAME': {\n        'attributes': {\n          'src': TrustedURL.name,\n          'srcdoc': TrustedHTML.name,\n        },\n      },\n      'INPUT': {\n        'attributes': {\n          'formaction': TrustedURL.name,\n        },\n      },\n      'OBJECT': {\n        'attributes': {\n          'data': TrustedScriptURL.name,\n          'codebase': TrustedScriptURL.name,\n        },\n      },\n      // TODO(koto): Figure out what to do with portals.\n      'SCRIPT': {\n        'attributes': {\n          'src': TrustedScriptURL.name,\n          'text': TrustedScript.name,\n        },\n        'properties': {\n          'innerText': TrustedScript.name,\n          'textContent': TrustedScript.name,\n          'text': TrustedScript.name,\n        },\n      },\n      '*': {\n        'attributes': {},\n        'properties': {\n          'innerHTML': TrustedHTML.name,\n          'outerHTML': TrustedHTML.name,\n        },\n      },\n    },\n    [XLINK_NS]: {\n      '*': {\n        'attributes': {\n          'href': TrustedURL.name,\n        },\n        'properties': {},\n      },\n    },\n    [SVG_NS]: {\n      '*': {\n        'attributes': {\n          'href': TrustedURL.name,\n        },\n        'properties': {},\n      },\n    },\n  };\n\n  /**\n   * A map of element property to HTML attribute names.\n   * @type {!Object<string, string>}\n   */\n  const ATTR_PROPERTY_MAP = {\n    'codebase': 'codeBase',\n    'formaction': 'formAction',\n  };\n\n  // Edge doesn't support srcdoc.\n  if (isBrowser && !('srcdoc' in HTMLIFrameElement.prototype)) {\n    delete TYPE_MAP[HTML_NS]['IFRAME']['attributes']['srcdoc'];\n  }\n\n  // in HTML, clone attributes into properties.\n  for (const tag of Object.keys(TYPE_MAP[HTML_NS])) {\n    if (!TYPE_MAP[HTML_NS][tag]['properties']) {\n      TYPE_MAP[HTML_NS][tag]['properties'] = {};\n    }\n    for (const attr of Object.keys(TYPE_MAP[HTML_NS][tag]['attributes'])) {\n      TYPE_MAP[HTML_NS][tag]['properties'][\n          ATTR_PROPERTY_MAP[attr] ? ATTR_PROPERTY_MAP[attr] : attr\n      ] = TYPE_MAP[HTML_NS][tag]['attributes'][attr];\n    }\n  }\n\n  // Add inline event handlers attribute names.\n  for (const name of getUnsafeAttributeEventHandlers()) {\n    TYPE_MAP[HTML_NS]['*']['attributes'][name] = 'TrustedScript';\n    TYPE_MAP[SVG_NS]['*']['attributes'][name] = 'TrustedScript';\n  }\n\n  /**\n   * @type {!Object<string,!Function>}\n   */\n  const createTypeMapping = {\n    'createHTML': TrustedHTML,\n    'createScriptURL': TrustedScriptURL,\n    'createURL': TrustedURL,\n    'createScript': TrustedScript,\n  };\n\n  const createFunctionAllowed = createTypeMapping.hasOwnProperty;\n\n  /**\n   * Function generating a type checker.\n   * @template T\n   * @param  {T} type The type to check against.\n   * @return {function(*):boolean}\n   */\n  function isTrustedTypeChecker(type) {\n    return (obj) => (obj instanceof type) && privateMap.has(obj);\n  }\n\n  /**\n   * Wraps a user-defined policy rules with TT constructor\n   * @param  {string} policyName The policy name\n   * @param  {TrustedTypesInnerPolicy} innerPolicy InnerPolicy\n   * @return {!TrustedTypePolicy} Frozen policy object\n   */\n  function wrapPolicy(policyName, innerPolicy) {\n    /**\n     * @template T\n     * @param {function(new:T, symbol, string)} Ctor a trusted type constructor\n     * @param {string} methodName the policy factory method name\n     * @return {function(string):!T} a factory that produces instances of Ctor.\n     */\n    function creator(Ctor, methodName) {\n      // This causes thisValue to be null when called below.\n      const method = innerPolicy[methodName] || (\n        policyName == DEFAULT_POLICY_NAME ?\n            rejectInputDefaultPolicyFn : rejectInputFn\n      );\n      const policySpecificType = freeze(new Ctor(creatorSymbol, policyName));\n      const factory = {\n        [methodName](s, ...args) {\n          // Trick to get methodName to show in stacktrace.\n          let result = method('' + s, ...args);\n          if (result === undefined || result === null) {\n            if (policyName == DEFAULT_POLICY_NAME) {\n              // These values mean that the input was rejected. This will cause\n              // a violation later, don't create types for them.\n              return result;\n            }\n            result = '';\n          }\n          const allowedValue = '' + result;\n          const o = freeze(create(policySpecificType));\n          privates(o)['v'] = allowedValue;\n          return o;\n        },\n      }[methodName];\n      return freeze(factory);\n    }\n\n    const policy = create(TrustedTypePolicy.prototype);\n\n    for (const name of getOwnPropertyNames(createTypeMapping)) {\n      policy[name] = creator(createTypeMapping[name], name);\n    }\n    defineProperty(policy, 'name', {\n      value: policyName,\n      writable: false,\n      configurable: false,\n      enumerable: true,\n    });\n\n    return /** @type {!TrustedTypePolicy} */ (freeze(policy));\n  }\n\n  /**\n   * Returns the name of the trusted type required for a given element\n   *   attribute.\n   * @param {string} tagName The name of the tag of the element.\n   * @param {string} attribute The name of the attribute.\n   * @param {string=} elementNs Element namespace.\n   * @param {string=} attributeNs The attribute namespace.\n   * @return {string?} Required type name or null, if a Trusted\n   *   Type is not required.\n   */\n  function getAttributeType(tagName, attribute, elementNs = '',\n      attributeNs = '') {\n    const canonicalAttr = toLowerCase.apply(String(attribute));\n    return getTypeInternal_(tagName, 'attributes', canonicalAttr,\n        elementNs, attributeNs) || null;\n  }\n\n  /**\n   * Returns a type name from a type map.\n   * @param {string} tag A tag name.\n   * @param {string} container 'attributes' or 'properties'\n   * @param {string} name The attribute / property name.\n   * @param {string=} elNs Element namespace.\n   * @param {string=} attrNs Attribute namespace.\n   * @return {string|undefined}\n   * @private\n   */\n  function getTypeInternal_(tag, container, name, elNs = '', attrNs = '') {\n    const canonicalTag = toUpperCase.apply(String(tag));\n\n    let ns = attrNs ? attrNs : elNs;\n    if (!ns) {\n      ns = HTML_NS;\n    }\n    const map = hasOwnProperty.apply(TYPE_MAP, [ns]) ? TYPE_MAP[ns] : null;\n    if (!map) {\n      return;\n    }\n    if (hasOwnProperty.apply(map, [canonicalTag]) &&\n        map[canonicalTag] &&\n        hasOwnProperty.apply(map[canonicalTag][container], [name]) &&\n        map[canonicalTag][container][name]) {\n      return map[canonicalTag][container][name];\n    }\n\n    if (hasOwnProperty.apply(map, ['*']) &&\n        hasOwnProperty.apply(map['*'][container], [name]) &&\n        map['*'][container][name]) {\n      return map['*'][container][name];\n    }\n  }\n\n  /**\n   * Returns the name of the trusted type required for a given element property.\n   * @param {string} tagName The name of the tag of the element.\n   * @param {string} property The property.\n   * @param {string=} elementNs Element namespace.\n   * @return {string?} Required type name or null, if a Trusted\n   *   Type is not required.\n   */\n  function getPropertyType(tagName, property, elementNs = '') {\n    // TODO: Support namespaces.\n    return getTypeInternal_(\n        tagName, 'properties', String(property), elementNs) || null;\n  }\n\n  /**\n   * Returns the type map-like object, that resolves a name of a type for a\n   * given tag + attribute / property in a given namespace.\n   * The keys of the map are uppercase tag names. Map entry has mappings between\n   * a lowercase attribute name / case-sensitive property name and a name of the\n   * type that is required for that attribute / property.\n   * Example entry for 'IMG': {\"attributes\": {\"src\": \"TrustedHTML\"}}\n   * @param {string=} namespaceUri The namespace URI (will use the current\n   *   document namespace URI if omitted).\n   * @return {TrustedTypesTypeMap}\n   */\n  function getTypeMapping(namespaceUri = '') {\n    if (!namespaceUri) {\n      try {\n        namespaceUri = document.documentElement.namespaceURI;\n      } catch (e) {\n        namespaceUri = HTML_NS;\n      }\n    }\n    /**\n     * @template T\n     * @private\n     * @param {T} o\n     * @return {T}\n     */\n    function deepClone(o) {\n      return JSON.parse(JSON.stringify(o));\n    }\n    const map = TYPE_MAP[namespaceUri];\n    if (!map) {\n      return {};\n    }\n    return deepClone(map);\n  }\n\n  /**\n   * Returns all configured policy names (even for non-exposed policies).\n   * @return {!Array<string>}\n   */\n  function getPolicyNames() {\n    // TODO(msamuel): Should we sort policyNames to avoid leaking or\n    // encouraging dependency on the order in which policy names are\n    // registered?  I think JavaScript builtin sorts are efficient for\n    // almost-sorted lists so the amortized cost is close to O(n).\n    return policyNames.slice();\n  }\n\n  /**\n   * Creates a TT policy.\n   *\n   * Returns a frozen object representing a policy - a collection of functions\n   * that may create TT objects based on the user-provided rules specified\n   * in the policy object.\n   *\n   * @param  {string} name A unique name of the policy.\n   * @param  {TrustedTypesInnerPolicy} policy Policy rules object.\n   * @return {TrustedTypePolicy} The policy that may create TT objects\n   *   according to the policy rules.\n   */\n  function createPolicy(name, policy) {\n    const pName = '' + name; // Assert it's a string\n\n    if (enforceNameWhitelist && allowedNames.indexOf(pName) === -1) {\n      throw new TypeError('Policy ' + pName + ' disallowed.');\n    }\n\n    if (enforceNameWhitelist && policyNames.indexOf(pName) !== -1) {\n      throw new TypeError('Policy ' + pName + ' exists.');\n    }\n    // Register the name early so that if policy getters unwisely calls\n    // across protection domains to code that reenters this function,\n    // policy author still has rights to the name.\n    policyNames.push(pName);\n\n    // Only copy own properties of names present in createTypeMapping.\n    const innerPolicy = create(null);\n    if (policy && typeof policy === 'object') {\n      // Treat non-objects as empty policies.\n      for (const key of getOwnPropertyNames(policy)) {\n        if (createFunctionAllowed.call(createTypeMapping, key)) {\n          innerPolicy[key] = policy[key];\n        }\n      }\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn('trustedTypes.createPolicy ' + pName +\n          ' was given an empty policy');\n    }\n    freeze(innerPolicy);\n\n    const wrappedPolicy = wrapPolicy(pName, innerPolicy);\n\n    if (pName === DEFAULT_POLICY_NAME) {\n      defaultPolicy = wrappedPolicy;\n    }\n\n    return wrappedPolicy;\n  }\n\n  /**\n   * Applies the policy name whitelist.\n   * @param {!Array<string>} allowedPolicyNames\n   */\n  function setAllowedPolicyNames(allowedPolicyNames) {\n    if (allowedPolicyNames.indexOf('*') !== -1) { // Any policy name is allowed.\n      enforceNameWhitelist = false;\n    } else {\n      enforceNameWhitelist = true;\n      allowedNames.length = 0;\n      forEach.call(allowedPolicyNames, (el) => {\n        push.call(allowedNames, '' + el);\n      });\n    }\n  }\n\n  /**\n   * Returns the default policy, or null if it was not created.\n   * @return {TrustedTypePolicy}\n   */\n  function getDefaultPolicy() {\n    return defaultPolicy;\n  }\n\n  /**\n   * Resets the default policy.\n   */\n  function resetDefaultPolicy() {\n    defaultPolicy = null;\n    policyNames.splice(policyNames.indexOf(DEFAULT_POLICY_NAME), 1);\n  }\n\n  const api = create(TrustedTypePolicyFactory.prototype);\n  assign(api, {\n    // The main function to create policies.\n    createPolicy,\n\n    getPolicyNames,\n\n    // Type checkers, also validating the object was initialized through a\n    // policy.\n    isHTML: isTrustedTypeChecker(TrustedHTML),\n    isURL: isTrustedTypeChecker(TrustedURL),\n    isScriptURL: isTrustedTypeChecker(TrustedScriptURL),\n    isScript: isTrustedTypeChecker(TrustedScript),\n\n    getAttributeType,\n    getPropertyType,\n    getTypeMapping,\n    emptyHTML,\n    defaultPolicy, // Just to make the compiler happy, this is overridden below.\n\n    TrustedHTML: TrustedHTML,\n    TrustedURL: TrustedURL,\n    TrustedScriptURL: TrustedScriptURL,\n    TrustedScript: TrustedScript,\n  });\n\n  defineProperty(api, 'defaultPolicy', {\n    get: getDefaultPolicy,\n    set: () => {},\n  });\n\n  return {\n    trustedTypes: freeze(api),\n    setAllowedPolicyNames,\n    getDefaultPolicy,\n    resetDefaultPolicy,\n  };\n};\n\n\nconst {\n  trustedTypes,\n  setAllowedPolicyNames,\n  getDefaultPolicy,\n  resetDefaultPolicy,\n} = trustedTypesBuilderTestOnly();\n\n/**\n * @license\n * Copyright 2017 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n */\n\nconst tt = trustedTypes;\n\n/**\n * Sets up the public Trusted Types API in the global object.\n */\nfunction setupPolyfill() {\n  // We use array accessors to make sure Closure compiler will not alter the\n  // names of the properties..\n\n  // we setup the polyfill only in browser environment.\n  if (typeof window === 'undefined') {\n    return;\n  }\n  const rootProperty = 'trustedTypes';\n\n  // Convert old window.TrustedTypes to window.trustedTypes.\n  if (window['TrustedTypes'] && typeof window[rootProperty] === 'undefined') {\n    window[rootProperty] = Object.freeze(window['TrustedTypes']);\n  }\n\n  if (typeof window[rootProperty] !== 'undefined') {\n    return;\n  }\n\n  const publicApi = Object.create(TrustedTypePolicyFactory.prototype);\n  Object.assign(publicApi, {\n    'isHTML': tt.isHTML,\n    'isURL': tt.isURL,\n    'isScriptURL': tt.isScriptURL,\n    'isScript': tt.isScript,\n    'createPolicy': tt.createPolicy,\n    'getPolicyNames': tt.getPolicyNames,\n    'getAttributeType': tt.getAttributeType,\n    'getPropertyType': tt.getPropertyType,\n    'getTypeMapping': tt.getTypeMapping,\n    'emptyHTML': tt.emptyHTML,\n    '_isPolyfill_': true,\n  });\n  Object.defineProperty(\n      publicApi,\n      'defaultPolicy',\n      Object.getOwnPropertyDescriptor(tt, 'defaultPolicy') || {});\n\n  window[rootProperty] = Object.freeze(publicApi);\n\n  window['TrustedHTML'] = tt.TrustedHTML;\n  window['TrustedURL'] = tt.TrustedURL;\n  window['TrustedScriptURL'] = tt.TrustedScriptURL;\n  window['TrustedScript'] = tt.TrustedScript;\n  window['TrustedTypePolicy'] = TrustedTypePolicy;\n  window['TrustedTypePolicyFactory'] = TrustedTypePolicyFactory;\n}\n\nsetupPolyfill();\n\nexport default tt;\n"]},"metadata":{},"sourceType":"module"}